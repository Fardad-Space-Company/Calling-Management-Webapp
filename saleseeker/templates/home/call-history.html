{% extends "layouts/base.html" %}

{% block title %}Call History for {{ shop_name }}{% endblock %}

{% block stylesheets %}
<style>
    .pagination {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
    }
    .page-info {
        margin: 0 20px;
    }
</style>
{% endblock stylesheets %}

{% block content %}
<div class="container">
    <h2>Call History for {{ shop_name }}</h2>
    <table class="table" id="callHistoryTable">
        <thead>
            <tr>
                <th>Employee ID</th>
                <th>ShopName</th>
                <th>Date</th>
                <th>Deal Status</th>
                <th>Shop Status</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in crm_data %}
            <tr>
                <td>{{ entry.EmployeeID }}</td>
                <td>{{ entry.ShopName }}</td>
                <td>{{ entry.Date }}</td>
                <td>{{ entry.DealStatus }}</td>
                <td>{{ entry.Shop_Status }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No call history entries found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination">
        {% if crm_data.has_previous %}
        <a class="btn btn-primary" href="?page={{ crm_data.previous_page_number }}">Previous</a>
        {% else %}
        <button class="btn btn-primary" disabled>Previous</button>
        {% endif %}
        <span class="page-info">Page {{ crm_data.number }} of {{ total_pages }}</span>
        {% if crm_data.has_next %}
        <a class="btn btn-primary" href="?page={{ crm_data.next_page_number }}">Next</a>
        {% else %}
        <button class="btn btn-primary" disabled>Next</button>
        {% endif %}
    </div>
</div>
{% endblock content %}
